<%- include('header') %>
    <!--/.navbar-->
    <div class="body-content">
        <div class="card-header">
            <h6 class="fs-17 fw-semi-bold mb-0"><%=Employee.name%></h6>
            <h6 class="fs-17 fw-semi-bold mb-0"><%=Employee.phone%></h6>
            <h6 class="fs-17 fw-semi-bold mb-0"><%=Employee.type%></h6>
        </div>

        <div class="card mb-4">
            <div class="card-body">
                <div class="text-end">
                    <button class="btn btn-primary" onclick="toggleTable()">Show/Hide Booked Tickets</button>
                </div>
                
                <div class="table-responsive" id="bookedTicketsTable" style="display: none;">
                    <table class="table display table-bordered table-striped table-hover basic" id="agentlist">
                        <h3>Booked Tickets</h3>  
                        <thead>
                            <tr>
                                <th scope="col">Ticket Code</th>
                                <th scope="col">Trip Go ID</th>
                                <th scope="col">Trip Back ID</th>
                                <th scope="col">Trip Go Date</th>
                                <th scope="col">Trip Back Date</th>
                                <th scope="col">Trip Route GO</th>
                                <th scope="col">Trip Route Back</th>
                                <th scope="col">Takeoff Station (GO)</th>
                                <th scope="col">Arrival Station (GO)</th>
                                <th scope="col">Status</th>
                                <th scope="col">Price</th>
                                <th scope="col">PaymentMethod</th>
                                <th scope="col">Settled</th>
                                <th scope="col">Seats Counter</th>
                                <th scope="col">Go Seats Number</th>
                                <th scope="col">Back Seats Number</th>
                                <th scope="col">Voucher</th>
                                <th scope="col">Booked By</th>
                                <th scope="col">Cancelled By</th>
                                <th scope="col">Cancelation Reason</th>
                                <th scope="col">Coustmer Name</th>
                                <th scope="col">Coustmer Phone</th>
                                <th scope="col">Created At</th>
                                <th scope="col">Action</th>

                                <% for(let i = 0 ; i < Employee.tickets_id.length ; i++) { %>
                                  
                                       

                            </tr>
                        </thead>
                        <tbody>

                            <tr>
                                <td><%=Employee.tickets_id[i].ticket_code%></td>
                                <td><%=Employee.tickets_id[i].trip_id%></td>
                                <td><%=Employee.tickets_id[i].Back_trip_id%></td>
                                <td><%=Employee.tickets_id[i].trip_date%></td>
                                <td><%=Employee.tickets_id[i].Back_trip_date%></td>
                                <td><%=Employee.tickets_id[i].CityRoutes%></td>
                                <td><%=Employee.tickets_id[i].CityRoutes.reverse()%></td>
                                <td><%=Employee.tickets_id[i].StationRoutes[0]%></td>
                                <td><%=Employee.tickets_id[i].StationRoutes[1]%></td>
                                <td><%=Employee.tickets_id[i].status%></td>
                                <td><%=Employee.tickets_id[i].price%></td>
                                <td><%=Employee.tickets_id[i].paymentMethod%></td>
                                <td><%=Employee.tickets_id[i].settledprice%></td>
                                <td><%=Employee.tickets_id[i].seatsCounter%></td>
                                <td><%=Employee.tickets_id[i].seats%></td>
                                <td><%=Employee.tickets_id[i].Backseats%></td>
                                <td><%=Employee.tickets_id[i].voucher ? Employee.tickets_id[i].voucher.code : '' %></td>
                                <td><%=Employee.tickets_id[i].BookEmployeeID ? Employee.tickets_id[i].BookEmployeeID.name : '' %></td>
                                <td><%=Employee.tickets_id[i].CancelEmployeeID ? Employee.tickets_id[i].CancelEmployeeID.name : '' %></td>
                                <td><%=Employee.tickets_id[i].cancelReason%></td>
                                <td><%=Employee.tickets_id[i].CoustmerID.name%></td>
                                <td><%=Employee.tickets_id[i].CoustmerID.phone%></td>
                                <td><%= new Date(Employee.tickets_id[i].CreatedAt).toLocaleString('en-US', { timeZone: 'UTC', hour12: false }).replace('T', ' ').slice(0, 19) %></td>

                                <td>



                                    <a href="/coustmer/ticket/<%=Employee.tickets_id[i].id%>" class="btn btn-sm btn-info text-white" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    
                                </td>
                            </tr>

                            <% } %>


                            




                        </tbody>
                    </table>
                </div>

            </div>
        </div>


        <div class="card mb-4">
            <div class="card-body">
                
                <div class="text-end">
                    <button class="btn btn-primary" onclick="toggleCancelledTickets()">Show/Hide Cancelled Tickets</button>
                </div>
                
                <div class="table-responsive" id="CancelledTicketsTable" style="display: none;">
                    <table class="table display table-bordered table-striped table-hover basic" id="agentlist">
                        <h3>Cancelled Tickets</h3>  
                      
                        <thead>
                            <tr>
                                <th scope="col">Ticket Code</th>
                                <th scope="col">Trip Go ID</th>
                                <th scope="col">Trip Back ID</th>
                                <th scope="col">Trip Go Date</th>
                                <th scope="col">Trip Back Date</th>
                                <th scope="col">Trip Route GO</th>
                                <th scope="col">Trip Route Back</th>
                                <th scope="col">Takeoff Station (GO)</th>
                                <th scope="col">Arrival Station (GO)</th>
                                <th scope="col">Status</th>
                                <th scope="col">Price</th>
                                <th scope="col">PaymentMethod</th>
                                <th scope="col">Settled</th>
                                <th scope="col">Seats Counter</th>
                                <th scope="col">Go Seats Number</th>
                                <th scope="col">Back Seats Number</th>
                                <th scope="col">Voucher</th>
                                <th scope="col">Booked By</th>
                                <th scope="col">Cancelled By</th>
                                <th scope="col">Cancelation Reason</th>
                                <th scope="col">Coustmer Name</th>
                                <th scope="col">Coustmer Phone</th>
                                <th scope="col">Created At</th>
                                <th scope="col">Action</th>

                                <% for(let i = 0 ; i < Employee.cancelTickets.length ; i++) { %>
                                  
                                       

                            </tr>
                        </thead>
                        <tbody>

                            <tr>
                                <td><%=Employee.cancelTickets[i].ticket_code%></td>
                                <td><%=Employee.cancelTickets[i].trip_id%></td>
                                <td><%=Employee.cancelTickets[i].Back_trip_id%></td>
                                <td><%=Employee.cancelTickets[i].trip_date%></td>
                                <td><%=Employee.cancelTickets[i].Back_trip_date%></td>
                                <td><%=Employee.cancelTickets[i].CityRoutes%></td>
                                <td><%=Employee.cancelTickets[i].CityRoutes.reverse()%></td>
                                <td><%=Employee.cancelTickets[i].StationRoutes[0]%></td>
                                <td><%=Employee.cancelTickets[i].StationRoutes[1]%></td>
                                <td><%=Employee.cancelTickets[i].status%></td>
                                <td><%=Employee.cancelTickets[i].price%></td>
                                <td><%=Employee.cancelTickets[i].paymentMethod%></td>
                                <td><%=Employee.cancelTickets[i].settledprice%></td>
                                <td><%=Employee.cancelTickets[i].seatsCounter%></td>
                                <td><%=Employee.cancelTickets[i].seats%></td>
                                <td><%=Employee.cancelTickets[i].Backseats%></td>
                                <td><%=Employee.cancelTickets[i].voucher ? Employee.cancelTickets[i].voucher.code : '' %></td>
                                <td><%=Employee.cancelTickets[i].BookEmployeeID ? Employee.cancelTickets[i].BookEmployeeID.name : '' %></td>
                                <td><%=Employee.cancelTickets[i].CancelEmployeeID ? Employee.cancelTickets[i].CancelEmployeeID.name : '' %></td>
                                <td><%=Employee.cancelTickets[i].cancelReason%></td>
                                <td><%=Employee.cancelTickets[i].CoustmerID.name%></td>
                                <td><%=Employee.cancelTickets[i].CoustmerID.phone%></td>
                                <td><%= new Date(Employee.cancelTickets[i].CreatedAt).toLocaleString('en-US', { timeZone: 'UTC', hour12: false }).replace('T', ' ').slice(0, 19) %></td>

                                <td>



                                    <a href="/coustmer/ticket/<%=Employee.cancelTickets[i].id%>" class="btn btn-sm btn-info text-white" title="Edit">
                                        <i class="fas fa-edit"></i>
                                    </a>
                                    
                                </td>
                            </tr>

                            <% } %>


                            




                        </tbody>
                    </table>
                </div>

            </div>
        </div>



        <div class="modal fade" id="confirmationModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">The Following Data Will Be Deleted</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="confirmationMessage">
                        <form action="#" method="post">
                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                Agent
                            </h5>
                            <ul>
                                <li style="list-style-type: none;">Agent 02 (2)</li>
                            </ul>
                            <br>
                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                Ticket
                            </h5>
                            <ul>
                                <li style="list-style-type: none;">TBLHZ9RKPI (21)</li>
                                <li style="list-style-type: none;">TBX0SUT37F (22)</li>
                            </ul>
                            <br>
                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                ticket ratings
                            </h5>
                            <ul>
                                <li style="list-style-type: none;">4 good service (4)</li>
                            </ul>
                            <br>
                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                PartialPaid
                            </h5>
                            <ul>
                                <li style="list-style-type: none;">TBLHZ9RKPI- Paid amount: 2266 (21)</li>
                                <li style="list-style-type: none;">TBX0SUT37F- Paid amount: 2266 (22)</li>
                            </ul>
                            <br>
                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                TicketJourney List
                            </h5>
                            <ul>
                                <li style="list-style-type: none;">John task on booking TBLHZ9RKPI (22)</li>
                                <li style="list-style-type: none;"> on booking TBLHZ9RKPI (23)</li>
                                <li style="list-style-type: none;">John task on booking TBX0SUT37F (24)</li>
                                <li style="list-style-type: none;"> on booking TBX0SUT37F (25)</li>
                            </ul>
                            <br>
                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                Payment MethodTotalAmount
                            </h5>

                            <ul>
                                <li style="list-style-type: none;"> - Amount: 2266 (11)</li>
                                <li style="list-style-type: none;"> - Amount: 2266 (12)</li>
                            </ul>
                            <br>
                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                agent payments
                            </h5>

                            <ul>
                                <li style="list-style-type: none;">Amount: 113.3 (4)</li>
                                <li style="list-style-type: none;">Amount: 113.3 (5)</li>
                            </ul>
                            <br>

                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                AgentTotal
                            </h5>

                            <ul>
                                <li style="list-style-type: none;">Income: 2266 Expense: 0 (5)</li>
                                <li style="list-style-type: none;">Income: 2266 Expense: 0 (6)</li>
                            </ul>
                            <br>


                            <h5
                                style="text-transform: capitalize; font-size: 16px; font-weight: bold; background-color: #e8e8e8; padding: 5px 15px;">
                                AgentCommission
                            </h5>

                            <ul>
                                <li style="list-style-type: none;">113.3% on ticket TBLHZ9RKPI (4)</li>
                                <li style="list-style-type: none;">113.3% on ticket TBX0SUT37F (5)</li>
                            </ul>
                            <br>
                            <div class="text-end">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-danger">Confirm</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!--/.body content-->
    </div>
    <!--/.main content-->
    </div>
    <!--/.wrapper-->
    <div class="overlay"></div>
    </div>
    </div>

    </body>
    <script>
        function toggleTable() {
            var table = document.getElementById("bookedTicketsTable");
            if (table.style.display === "none") {
                table.style.display = "block";
            } else {
                table.style.display = "none";
            }
        }


        function toggleCancelledTickets() {
            var table = document.getElementById("CancelledTicketsTable");
            if (table.style.display === "none") {
                table.style.display = "block";
            } else {
                table.style.display = "none";
            }
        }
    </script>

    <script src="js/metisMenu/metisMenu.min.js"></script>
    <script src="js/perfect-scrollbar/dist/perfect-scrollbar.min.js"></script>
    <!-- message hide -->
    <script src="js/sidebar.js"></script>
    <script src="js/common.js"></script>
    <script src="js/dynamicinput.js"></script>

    </html>